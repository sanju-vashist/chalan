<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CNCMA e-Portal</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Courier+Prime:ital,wght@0,400;0,700;1,400&family=Inter:wght@400;500;600;700&display=swap');

        :root {
            --navy: #1a237e;
            --navy-dark: #0d1757;
            --red: #c62828;
            --gold: #c9a84c;
            --bg: #dce3f0;
            --paper: #f5f0e8;
            --white: #ffffff;
            --border: #1a237e;
            --muted: #666;
            --mono: 'Courier Prime', 'Courier New', monospace;
            --sans: 'Inter', Arial, sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: var(--bg);
            font-family: var(--sans);
            color: #111;
            min-height: 100vh;
        }

        .satire-banner {
            background: #1a1a1a;
            color: #fdd835;
            text-align: center;
            padding: 8px 20px;
            font-family: var(--mono);
            font-size: 13px;
            letter-spacing: 0.01em;
        }

        .satire-banner strong {
            color: #ffffff;
        }

        #homePage {
            display: block;
        }

        .home-header {
            background: var(--white);
            border-bottom: 1px solid #ddd;
            padding: 14px 40px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .home-header-left {
            display: flex;
            align-items: center;
            gap: 14px;
        }

        .logo-img {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--gold);
        }

        .home-header-titles h2 {
            font-family: var(--sans);
            font-size: 14px;
            font-weight: 700;
            color: #111;
            letter-spacing: 0.04em;
        }

        .home-header-titles p {
            font-size: 11px;
            color: var(--muted);
            letter-spacing: 0.03em;
        }

        .login-btn {
            border: 1.5px solid #333;
            background: transparent;
            padding: 8px 18px;
            font-size: 13px;
            font-weight: 600;
            font-family: var(--sans);
            cursor: pointer;
            letter-spacing: 0.05em;
            border-radius: 3px;
            transition: all 0.2s;
        }

        .login-btn:hover {
            background: #111;
            color: white;
        }

        .ticker-bar {
            background: var(--navy);
            color: white;
            padding: 9px 0;
            overflow: hidden;
        }

        .ticker-track {
            display: flex;
            gap: 80px;
            white-space: nowrap;
            animation: scroll-ticker 35s linear infinite;
            font-family: var(--mono);
            font-size: 12.5px;
        }

        .ticker-item {
            color: #a5b4fc;
        }

        .ticker-item .ti-icon {
            color: #fdd835;
            margin-right: 6px;
        }

        @keyframes scroll-ticker {
            0% {
                transform: translateX(0);
            }

            100% {
                transform: translateX(-50%);
            }
        }

        .home-wrap {
            max-width: 700px;
            margin: 50px auto;
            padding: 0 20px 80px;
        }

        .home-card {
            background: white;
            border: 1px solid #d0d8ee;
            border-radius: 8px;
            padding: 55px 65px;
            text-align: center;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.06);
        }

        .home-card-title {
            font-family: var(--sans);
            font-size: 46px;
            font-weight: 800;
            letter-spacing: 0.03em;
            margin-bottom: 4px;
        }

        .home-card-title .t-navy {
            color: var(--navy);
        }

        .home-card-title .t-red {
            color: var(--red);
        }

        .home-subtitle {
            font-size: 15px;
            color: var(--muted);
            font-weight: 500;
            margin-bottom: 38px;
        }

        .act-callout {
            background: #f4f6fb;
            border-left: 4px solid var(--navy);
            text-align: left;
            padding: 18px 22px;
            border-radius: 0 5px 5px 0;
            margin-bottom: 36px;
        }

        .act-callout .ac-label {
            font-size: 13px;
            color: var(--muted);
            margin-bottom: 4px;
        }

        .act-callout .ac-text {
            font-size: 15px;
            font-weight: 700;
            color: var(--navy);
        }

        .status-strip {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 14px 0;
            border-top: 1px solid #e8ecf4;
            border-bottom: 1px solid #e8ecf4;
            margin-bottom: 30px;
            font-size: 13px;
        }

        .status-live {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--muted);
        }

        .status-dot {
            width: 9px;
            height: 9px;
            border-radius: 50%;
            background: #2ecc71;
            box-shadow: 0 0 0 3px rgba(46, 204, 113, 0.22);
            display: inline-block;
        }

        .status-live strong {
            color: #2ecc71;
        }

        .status-ref {
            font-family: var(--mono);
            font-size: 12px;
            color: var(--muted);
        }

        .generate-btn {
            width: 100%;
            background: var(--navy);
            color: white;
            border: none;
            padding: 18px;
            font-family: var(--sans);
            font-size: 17px;
            font-weight: 700;
            letter-spacing: 0.14em;
            text-transform: uppercase;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.18s;
        }

        .generate-btn:hover {
            background: var(--navy-dark);
            transform: translateY(-1px);
            box-shadow: 0 6px 18px rgba(26, 35, 126, 0.25);
        }

        #formPage {
            display: none;
        }

        .form-page-wrap {
            max-width: 820px;
            margin: 0 auto;
            padding: 24px 20px 60px;
        }

        .form-topbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .back-link {
            font-family: var(--mono);
            font-size: 14px;
            color: var(--muted);
            cursor: pointer;
            background: none;
            border: none;
            letter-spacing: 0.02em;
        }

        .back-link:hover {
            color: var(--navy);
        }

        .form-doc {
            background: var(--paper);
            border: 1px solid #c8c0a8;
            border-radius: 4px;
            box-shadow: 0 2px 16px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .doc-meta {
            display: flex;
            justify-content: space-between;
            padding: 16px 36px 12px;
            border-bottom: 2.5px solid var(--navy);
            font-family: var(--mono);
            font-size: 13px;
            font-weight: 700;
            color: var(--navy);
            letter-spacing: 0.06em;
        }

        .doc-title-area {
            text-align: center;
            padding: 30px 36px 14px;
            border-bottom: 1px dashed #aaa;
        }

        .doc-title {
            font-family: var(--mono);
            font-size: 26px;
            font-weight: 700;
            text-decoration: underline;
            text-underline-offset: 5px;
            letter-spacing: 0.06em;
            color: #111;
        }

        .doc-ref-row {
            display: flex;
            justify-content: space-between;
            font-family: var(--mono);
            font-size: 12.5px;
            color: #444;
            margin-top: 12px;
            padding: 10px 14px;
            border: 1px dashed #bbb;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.5);
        }

        .doc-divider {
            border: none;
            border-top: 2px dotted #bbb;
            margin: 18px 0;
        }

        .doc-body {
            padding: 10px 36px 36px;
        }

        .section-block {
            border: 1.5px solid var(--navy);
            border-radius: 3px;
            margin-bottom: 28px;
            position: relative;
            background: white;
        }

        .section-label {
            position: absolute;
            top: -14px;
            left: 16px;
            background: var(--navy);
            color: white;
            font-family: var(--mono);
            font-size: 12px;
            font-weight: 700;
            letter-spacing: 0.1em;
            padding: 3px 12px;
            border-radius: 2px;
        }

        .section-inner {
            padding: 28px 24px 20px;
        }

        .field-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 18px;
        }

        .field-row.full {
            grid-template-columns: 1fr;
        }

        .field-group {
            display: flex;
            flex-direction: column;
        }

        .field-label {
            font-family: var(--mono);
            font-size: 11.5px;
            font-weight: 700;
            letter-spacing: 0.1em;
            color: #333;
            margin-bottom: 7px;
            text-transform: uppercase;
        }

        .field-input,
        .field-select,
        .field-textarea {
            font-family: var(--mono);
            font-size: 14.5px;
            padding: 9px 12px;
            border: 1.5px solid #ccc;
            border-radius: 3px;
            background: white;
            color: #111;
            width: 100%;
            transition: border-color 0.2s;
        }

        .field-input:focus,
        .field-select:focus,
        .field-textarea:focus {
            outline: none;
            border-color: var(--navy);
        }

        .field-input::placeholder {
            color: #aaa;
        }

        .radio-row {
            display: flex;
            align-items: center;
            gap: 24px;
            padding: 6px 0;
        }

        .radio-opt {
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: var(--mono);
            font-size: 13.5px;
            font-weight: 700;
            letter-spacing: 0.08em;
            cursor: pointer;
        }

        input[type="radio"] {
            width: 17px;
            height: 17px;
            accent-color: var(--red);
            cursor: pointer;
        }

        .evidence-note {
            font-family: var(--mono);
            font-size: 11.5px;
            color: var(--muted);
            font-style: italic;
            margin-bottom: 10px;
        }

        .file-choose-wrapper {
            border: 1.5px solid #ccc;
            border-radius: 3px;
            padding: 10px 14px;
            background: white;
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .file-choose-btn {
            background: #eee;
            border: 1px solid #aaa;
            padding: 4px 14px;
            font-family: var(--mono);
            font-size: 12.5px;
            cursor: pointer;
            border-radius: 3px;
        }

        .file-choose-label {
            font-family: var(--mono);
            font-size: 12.5px;
            color: #555;
        }

        .file-previews-row {
            display: flex;
            gap: 10px;
            margin-top: 8px;
            flex-wrap: wrap;
        }

        .file-preview-img {
            max-height: 80px;
            max-width: 100px;
            border: 1px solid #ccc;
            border-radius: 3px;
        }

        input[type="file"].hidden-file {
            display: none;
        }

        .payment-radio-row {
            display: flex;
            align-items: center;
            gap: 24px;
            margin-bottom: 18px;
        }

        .declare-box {
            background: #fef9e7;
            border: 1.5px solid #ccc;
            border-radius: 3px;
            padding: 16px 20px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 24px;
        }

        .declare-box input[type="checkbox"] {
            width: 16px;
            height: 16px;
            margin-top: 3px;
            accent-color: var(--navy);
            flex-shrink: 0;
            cursor: pointer;
        }

        .declare-box span {
            font-family: var(--mono);
            font-size: 12.5px;
            letter-spacing: 0.06em;
            text-transform: uppercase;
            color: #333;
            line-height: 1.6;
        }

        .issue-btn {
            width: 100%;
            background: var(--navy);
            color: white;
            border: none;
            padding: 18px;
            font-family: var(--mono);
            font-size: 17px;
            font-weight: 700;
            letter-spacing: 0.14em;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.18s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .issue-btn:hover {
            background: var(--navy-dark);
        }

        #challanPage {
            display: none;
        }

        .challan-page-wrap {
            max-width: 900px;
            margin: 0 auto;
            padding: 24px 20px 60px;
        }

        .challan-doc {
            background: white;
            border: 2px solid #111;
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.12);
        }

        .challan-header {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 18px 28px 16px;
            border-bottom: 2px solid #111;
            background: white;
        }

        .challan-logo-img {
            width: 82px;
            height: 82px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--gold);
            flex-shrink: 0;
        }

        .challan-logo-fallback {
            width: 82px;
            height: 82px;
            border-radius: 50%;
            background: radial-gradient(circle at 35% 30%, #d4a84b, #7a4e10);
            border: 3px solid var(--gold);
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            flex-shrink: 0;
        }

        .challan-titles {
            text-align: center;
            flex: 1;
        }

        .ch-hindi {
            font-size: 20px;
            font-weight: 700;
            color: #111;
            margin-bottom: 2px;
        }

        .ch-english {
            font-size: 17px;
            font-weight: 700;
            color: #111;
            margin-bottom: 4px;
        }

        .ch-hindi-sub {
            font-size: 12px;
            color: #444;
            margin-bottom: 1px;
        }

        .ch-english-sub {
            font-size: 12px;
            color: #444;
        }

      
        .images-row {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
            border-bottom: 2px solid #111;
        }

        .img-cell {
            border-right: 1.5px solid #333;
            padding: 12px 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 130px;
        }

        .img-cell:last-child {
            border-right: none;
        }

        .img-label-cell {
            font-size: 14px;
            font-weight: 700;
            color: #111;
            text-align: center;
            line-height: 1.5;
        }

        .evidence-slot {
            color: #bbb;
            font-size: 12px;
            font-style: italic;
            font-family: var(--mono);
        }

        .challan-body {
            position: relative;
            padding: 28px 36px 34px;
            background: white;
            overflow: hidden;
        }

        .watermark-img {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 380px;
            height: 380px;
            transform: translate(-50%, -50%);
            object-fit: contain;
            opacity: 0.07;
            pointer-events: none;
            z-index: 0;
            border-radius: 50%;
        }

        .challan-fields {
            position: relative;
            z-index: 2;
        }

        .cf-row {
            font-size: 15.5px;
            color: #111;
            margin-bottom: 8px;
            line-height: 1.55;
        }

        .cf-row strong {
            font-weight: 700;
        }

        .cf-gap {
            margin-top: 14px;
        }

        .offence-block {
            margin: 14px 0 6px;
        }

        .offence-title {
            font-size: 15.5px;
            font-weight: 700;
            color: #111;
            margin-bottom: 8px;
        }

        .offence-item {
            font-size: 16px;
            font-weight: 700;
            color: #111;
            margin-bottom: 6px;
            padding-left: 14px;
        }

        .penalty-hindi {
            font-size: 15px;
            color: #111;
            margin-bottom: 3px;
            padding-left: 14px;
        }

        .penalty-hindi strong {
            font-weight: 700;
        }

        .penalty-english {
            font-size: 15px;
            color: #111;
            margin-bottom: 10px;
            padding-left: 14px;
        }

        .penalty-english strong {
            font-weight: 700;
        }

        .remarks-row {
            font-size: 15.5px;
            margin-top: 4px;
            padding-left: 14px;
        }

        .remarks-row strong {
            font-weight: 700;
        }

        .challan-footer {
            text-align: center;
            padding: 12px 36px 16px;
            font-family: var(--mono);
            font-size: 11.5px;
            color: #888;
            border-top: 1px solid #ddd;
            background: #fafafa;
        }

        .challan-footer a {
            color: var(--navy);
        }

        .action-row {
            display: flex;
            gap: 14px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .act-btn {
            flex: 1;
            padding: 14px 10px;
            font-family: var(--sans);
            font-size: 14px;
            font-weight: 700;
            letter-spacing: 0.06em;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.18s;
            min-width: 140px;
        }

        .act-btn.blue {
            background: #1565c0;
            color: white;
        }

        .act-btn.blue:hover {
            background: #0d47a1;
        }

        .act-btn.dark {
            background: #333;
            color: white;
        }

        .act-btn.dark:hover {
            background: #111;
        }

        .act-btn.outline {
            background: white;
            color: #333;
            border: 1.5px solid #999;
        }

        .act-btn.outline:hover {
            background: #f5f5f5;
        }

        @media (max-width: 620px) {
            .field-row {
                grid-template-columns: 1fr;
            }

            .images-row {
                grid-template-columns: 1fr 1fr;
            }

            .home-card {
                padding: 30px 20px;
            }

            .doc-body {
                padding: 10px 16px 24px;
            }

            .challan-header {
                flex-direction: column;
                text-align: center;
            }

            .challan-body {
                padding: 20px 16px;
            }

            .form-page-wrap,
            .challan-page-wrap {
                padding: 14px 10px 40px;
            }
        }

        @media print {

            .satire-banner,
            .home-header,
            .ticker-bar,
            .action-row,
            .back-link,
            .form-topbar,
            .no-print {
                display: none !important;
            }

            body {
                background: white;
            }
        }
    </style>
</head>

<body>

    <div class="satire-banner">
        <!-- ‚ö†Ô∏è <strong>SATIRE ONLY:</strong> This website is purely for entertainment. It is not affiliated with any
        government or private entity whatsoever.
    </div> -->

    <div id="homePage">
        <div class="home-header">
            <div class="home-header-left">
                <img src="logo.png" class="logo-img" alt="CNCMA Logo">
                <div class="home-header-titles">
                    <h2>GOVERNMENT OF NON-CHALANCE</h2>
                    <p>MINISTRY OF MASCULINE VIRTUES</p>
                </div>
            </div>
            <button class="login-btn">OFFICIAL LOGIN üîí</button>
        </div>

        <div class="ticker-bar">
            <div class="ticker-track">
                <span class="ticker-item"><span class="ti-icon">üì¢</span>Breathing too loudly is now a punishable
                    offence under Section 420.</span>
                <span class="ticker-item"><span class="ti-icon">üì¢</span>UPDATE: 500/- Penalty for not replying within
                    0.5 seconds.</span>
                <span class="ticker-item"><span class="ti-icon">üì¢</span>New Offence Added: Zoning out during gossip
                    session.</span>
                <span class="ticker-item"><span class="ti-icon">üì¢</span>REMINDER: Forgetting month-iversary carries
                    double fine.</span>
                <span class="ticker-item"><span class="ti-icon">üì¢</span>Breathing too loudly is now a punishable
                    offence under Section 420.</span>
                <span class="ticker-item"><span class="ti-icon">üì¢</span>UPDATE: 500/- Penalty for not replying within
                    0.5 seconds.</span>
                <span class="ticker-item"><span class="ti-icon">üì¢</span>New Offence Added: Zoning out during gossip
                    session.</span>
                <span class="ticker-item"><span class="ti-icon">üì¢</span>REMINDER: Forgetting month-iversary carries
                    double fine.</span>
            </div>
        </div>

        <div class="home-wrap">
            <div class="home-card">
                <div class="home-card-title"><span class="t-navy">CNCMA</span> <span class="t-red">e-PORTAL</span></div>
                <div class="home-subtitle">Challan-ed Non-Chalant Men Association</div>
                <div class="act-callout">
                    <div class="ac-label">Infringement Report under</div>
                    <div class="ac-text">Cultivation of Healthy Masculine Virtues Act, 2026</div>
                </div>
                <div class="status-strip">
                    <div class="status-live">
                        <span class="status-dot"></span>
                        System Status: <strong>&nbsp;Operational</strong>
                    </div>
                    <div class="status-ref">Ref No: CNCMA/2026/V-DAY/001</div>
                </div>
                <button class="generate-btn" onclick="showForm()">GENERATE E-CHALLAN</button>
            </div>
        </div>
    </div>

    <div id="formPage">
        <div class="form-page-wrap">
            <div class="form-topbar">
                <button class="back-link" onclick="showHome()">‚Üê Back to Home</button>
                <span
                    style="font-family:var(--mono);font-size:13px;font-weight:700;color:var(--navy);letter-spacing:0.08em;">NON-CHALANCE
                    REGISTRY</span>
            </div>

            <div class="form-doc">
                <div class="doc-meta">
                    <span>FORM NO. 420-B</span>
                </div>
                <div class="doc-title-area">
                    <div class="doc-title">DRAFT INFRINGEMENT REPORT</div>
                    <div class="doc-ref-row">
                        <span>REF NO: <span id="formRefNo">CNCMA/2026/420-000</span></span>
                        <span>DATE: <span id="formDateDisplay">--/--/----</span></span>
                    </div>
                </div>
                <div style="padding:0 36px;">
                    <hr class="doc-divider">
                </div>

                <div class="doc-body">
                    <form id="challanForm">
                        <div class="section-block">
                            <div class="section-label">SECTION I: PARTICULARS</div>
                            <div class="section-inner">
                                <div class="field-row">
                                    <div class="field-group">
                                        <label class="field-label">ACCUSED</label>
                                        <input type="text" id="accused" class="field-input" placeholder="e.g. Aditya"
                                            required>
                                    </div>
                                    <div class="field-group">
                                        <label class="field-label">VICTIM</label>
                                        <input type="text" id="victim" class="field-input" placeholder="e.g. Geet"
                                            required>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="section-block">
                            <div class="section-label">SECTION II: INCIDENT</div>
                            <div class="section-inner">
                                <div class="field-row">
                                    <div class="field-group">
                                        <label class="field-label">PLACE</label>
                                        <input type="text" id="place" class="field-input" required>
                                    </div>
                                    <div class="field-group">
                                        <label class="field-label">DATE</label>
                                        <input type="date" id="date" class="field-input" required>
                                    </div>
                                </div>
                                <div class="field-group" style="margin-bottom:18px;">
                                    <label class="field-label">IS REPEAT VIOLATOR?</label>
                                    <div class="radio-row">
                                        <label class="radio-opt"><input type="radio" name="repeat" value="YES">
                                            YES</label>
                                        <label class="radio-opt"><input type="radio" name="repeat" value="NO" checked>
                                            NO</label>
                                    </div>
                                </div>
                                <div class="field-group" style="margin-bottom:18px;">
                                    <label class="field-label">OFFENCE</label>
                                    <select id="offence" class="field-select" required>
                                        <option value="">Select Offence</option>
                                        <option>Not watching reels sent by partner ü§≥</option>
                                        <option>Leaving the toilet seat up üöΩ</option>
                                        <option>Not asking 'what happened' when she said 'I'm fine'</option>
                                        <option>Zoning out during important gossip session üòµ</option>
                                        <option>Replying with 'K' or 'üëç'</option>
                                        <option>Forgot Month-iversary üôÑ</option>
                                        <option>Breathing too loudly ü´Å</option>
                                        <option>Other...</option>
                                    </select>
                                    <textarea id="otherOffence" class="field-textarea"
                                        style="display:none;margin-top:10px;" placeholder="Describe other offence"
                                        rows="3"></textarea>
                                </div>
                                <div class="field-group">
                                    <label class="field-label">EVIDENCE (OPTIONAL; CHOOSE UPTO 3)</label>
                                    <div class="evidence-note">*Your images remain on your device. We do not store or
                                        retain any sensitive information.</div>
                                    <div class="file-choose-wrapper">
                                        <button type="button" class="file-choose-btn"
                                            onclick="document.getElementById('evidenceInput').click()">Choose
                                            files</button>
                                        <span class="file-choose-label" id="fileChooseLabel">No file chosen</span>
                                        <input type="file" id="evidenceInput" class="hidden-file" accept="image/*"
                                            multiple onchange="handleFiles(this)">
                                    </div>
                                    <div class="file-previews-row" id="filePreviews"></div>
                                </div>
                            </div>
                        </div>

                        <div class="section-block">
                            <div class="section-label">SECTION III: PENALTY</div>
                            <div class="section-inner">
                                <div class="field-group" style="margin-bottom:18px;">
                                    <label class="field-label">PAYMENT MODE</label>
                                    <div class="payment-radio-row">
                                        <label class="radio-opt"><input type="radio" name="payment" value="ROSES üíê"
                                                checked> ROSES</label>
                                        <label class="radio-opt"><input type="radio" name="payment" value="CASH / UPI">
                                            CASH / UPI</label>
                                    </div>
                                </div>
                                <div class="field-group" style="margin-bottom:18px;">
                                    <label class="field-label">FINE (QTY)</label>
                                    <input type="number" id="fine" class="field-input" min="1" required>
                                </div>
                                <div class="field-group">
                                    <label class="field-label">REMARKS</label>
                                    <textarea id="remarks" class="field-textarea" rows="4"></textarea>
                                </div>
                            </div>
                        </div>

                        <div class="declare-box">
                            <input type="checkbox" id="declare" required>
                            <span>I HEREBY DECLARE THAT THE INFORMATION ABOVE IS TRUE TO MY OVERTHINKING AND
                                DELUSION.</span>
                        </div>
                        <button type="submit" class="issue-btn">‚öñÔ∏è &nbsp;ISSUE OFFICIAL CHALLAN</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div id="challanPage">
        <div class="challan-page-wrap">

            <div class="challan-doc" id="challanDocEl">

                <div class="challan-header">
                    <img src="logo.png" class="challan-logo-img" id="challanLogoImg" alt="CNCMA Logo">
                    <div class="challan-logo-fallback" id="challanLogoFallback">üèõÔ∏è</div>

                    <div class="challan-titles">
                        <div class="ch-hindi">‡§ö‡§æ‡§≤‡§æ‡§®-‡§î‡§∞ ‡§≤‡§æ‡§™‡§∞‡§µ‡§æ‡§π ‡§™‡•Å‡§∞‡•Å‡§∑ ‡§∏‡§Ç‡§ò</div>
                        <div class="ch-english">Challan-Ed Non-Chalant Men Association</div>
                        <div class="ch-hindi-sub">(‡§∏‡•ç‡§µ‡§∏‡•ç‡§• ‡§™‡•Å‡§∞‡•Å‡§∑ ‡§ó‡•Å‡§£‡•ã‡§Ç ‡§ï‡•Ä ‡§ñ‡•á‡§§‡•Ä ‡§Ö‡§ß‡§ø‡§®‡§ø‡§Ø‡§Æ, 2026 ‡§â‡§≤‡•ç‡§≤‡§Ç‡§ò‡§® ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü)</div>
                        <div class="ch-english-sub">(Infringement Report under Cultivation of Healthy Masculine Virtues
                            Act, 2026)</div>
                    </div>
                </div>

                <div class="images-row">
                    <div class="img-cell">
                        <div class="img-label-cell">Relevant<br>Images<br>&gt;&gt;&gt;</div>
                    </div>
                    <div class="img-cell">
                        <img src="logo.png" id="qrCodeImg" alt="QR"
                            style="max-width:105px;max-height:105px;object-fit:contain;">
                    </div>
                    <div class="img-cell" id="slotImg1">
                        <span class="evidence-slot">&lt;image 1&gt;</span>
                    </div>
                    <div class="img-cell" id="slotImg2">
                        <span class="evidence-slot">&lt;image 2&gt;</span>
                    </div>
                    <div class="img-cell" id="slotImg3">
                        <span class="evidence-slot">&lt;image 3&gt;</span>
                    </div>
                </div>

                <div class="challan-body">
                    <img src="logo.png" class="watermark-img" id="watermarkImg" alt="">

                    <div class="challan-fields" id="challanFields">
                    </div>
                </div>

                <div class="challan-footer">
                    Generated by National Informatics Centre for Heartbreak (NIC-H). Visit <a href="#">cncma.gov.in</a>
                    for more information.
                </div>
            </div>

            <div class="action-row no-print">
                <button class="act-btn blue" onclick="downloadImage()">‚¨á Download Image</button>
                <button class="act-btn dark" onclick="downloadPDF()">‚¨á Download PDF</button>
                <button class="act-btn outline" onclick="resetAll()">Edit Data</button>
            </div>

        </div>
    </div>

    <script>
        let uploadedImages = [null, null, null];
        let currentRef = '';

        currentRef = generateRef();
        document.getElementById('formRefNo').textContent = currentRef;
        document.getElementById('formDateDisplay').textContent = new Date().toLocaleDateString('en-IN', { day: '2-digit', month: '2-digit', year: 'numeric' });
        document.getElementById('date').value = new Date().toISOString().split('T')[0];

        document.getElementById('challanLogoImg').onerror = function () {
            this.style.display = 'none';
            document.getElementById('challanLogoFallback').style.display = 'flex';
        };

        function showHome() {
            document.getElementById('homePage').style.display = 'block';
            document.getElementById('formPage').style.display = 'none';
            document.getElementById('challanPage').style.display = 'none';
            window.scrollTo(0, 0);
        }
        function showForm() {
            document.getElementById('homePage').style.display = 'none';
            document.getElementById('formPage').style.display = 'block';
            document.getElementById('challanPage').style.display = 'none';
            window.scrollTo(0, 0);
        }
        function showChallan() {
            document.getElementById('homePage').style.display = 'none';
            document.getElementById('formPage').style.display = 'none';
            document.getElementById('challanPage').style.display = 'block';
            window.scrollTo(0, 0);
        }

        function generateRef() {
            const yr = new Date().getFullYear();
            const n = Math.floor(Math.random() * 900) + 100;
            return `CNCMA/${yr}/420-${n}`;
        }

        document.getElementById('offence').addEventListener('change', function () {
            const ot = document.getElementById('otherOffence');
            if (this.value === 'Other...') {
                ot.style.display = 'block'; ot.required = true;
            } else {
                ot.style.display = 'none'; ot.required = false; ot.value = '';
            }
        });

        function handleFiles(input) {
            const files = Array.from(input.files).slice(0, 3);
            uploadedImages = [null, null, null];
            document.getElementById('filePreviews').innerHTML = '';
            document.getElementById('fileChooseLabel').textContent = files.length > 0 ? `${files.length} file(s) chosen` : 'No file chosen';
            files.forEach((file, i) => {
                const reader = new FileReader();
                reader.onload = ev => {
                    uploadedImages[i] = ev.target.result;
                    const img = document.createElement('img');
                    img.src = ev.target.result;
                    img.className = 'file-preview-img';
                    document.getElementById('filePreviews').appendChild(img);
                };
                reader.readAsDataURL(file);
            });
        }

        document.getElementById('challanForm').addEventListener('submit', function (e) {
            e.preventDefault();
            if (!document.getElementById('declare').checked) { alert('Please check the declaration!'); return; }

            const repeatVal = document.querySelector('input[name="repeat"]:checked')?.value || 'NO';
            const paymentVal = document.querySelector('input[name="payment"]:checked')?.value || 'ROSES üíê';
            const offenceVal = document.getElementById('offence').value === 'Other...'
                ? document.getElementById('otherOffence').value
                : document.getElementById('offence').value;

            const data = {
                ref: currentRef,
                accused: document.getElementById('accused').value,
                victim: document.getElementById('victim').value,
                place: document.getElementById('place').value,
                dateInc: document.getElementById('date').value,
                repeat: repeatVal === 'YES' ? 'Yes' : 'No',
                offence: offenceVal,
                payment: paymentVal,
                fine: document.getElementById('fine').value,
                remarks: document.getElementById('remarks').value
            };

            ['slotImg1', 'slotImg2', 'slotImg3'].forEach((id, i) => {
                const cell = document.getElementById(id);
                if (uploadedImages[i]) {
                    cell.innerHTML = `<img src="${uploadedImages[i]}" style="max-width:100%;max-height:105px;object-fit:cover;border:1px solid #ccc;">`;
                } else {
                    cell.innerHTML = `<span class="evidence-slot">&lt;image ${i + 1}&gt;</span>`;
                }
            });

            const isRoses = data.payment.includes('ROSES');
            const fineUnit = isRoses ? 'Roses üíê' : '‡§∞‡•Å‡§™‡§Ø‡•á';

            document.getElementById('challanFields').innerHTML = `
                <div class="cf-row"><strong>Violator name:</strong> ${data.accused}</div>
                <div class="cf-row"><strong>Violation victim:</strong> ${data.victim}</div>
                <div class="cf-row"><strong>Challan number:</strong> ${data.ref}</div>
                <div class="cf-row cf-gap"><strong>Date of incident:</strong> ${data.dateInc}</div>
                <div class="cf-row"><strong>Place of incident:</strong> ${data.place}</div>
                <div class="cf-row"><strong>Is repeat violator?:</strong> ${data.repeat}</div>
                <div class="offence-block">
                    <div class="offence-title">Offences charged with:</div>
                    <div class="offence-item">1. ${data.offence}</div>
                    <div class="penalty-hindi">‡§ä‡§™‡§∞ ‡§¨‡§§‡§æ‡§è ‡§ó‡§è ‡§ú‡•Å‡§∞‡•ç‡§Æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§§‡§Ø ‡§ú‡•Å‡§∞‡•ç‡§Æ‡§æ‡§®‡§æ: <strong>${data.fine}/- ${fineUnit}</strong></div>
                    <div class="penalty-english">Penalty specified against above offence charged: <strong>${data.fine}/- ${isRoses ? 'Roses' : 'INR'}</strong></div>
                    ${data.remarks ? `<div class="remarks-row"><strong>Remarks:</strong> ${data.remarks}</div>` : ''}
                </div>
            `;

            showChallan();
        });

        function downloadImage() {
            const el = document.getElementById('challanDocEl');
            html2canvas(el, { scale: 2, useCORS: true, allowTaint: true, backgroundColor: '#fff' }).then(canvas => {
                const a = document.createElement('a');
                a.download = `challan_${currentRef.replace(/\//g, '_')}.png`;
                a.href = canvas.toDataURL();
                a.click();
            });
        }

        function downloadPDF() {
            const el = document.getElementById('challanDocEl');
            html2canvas(el, { scale: 2, useCORS: true, allowTaint: true }).then(canvas => {
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF('p', 'mm', 'a4');
                const imgW = 210;
                const imgH = (canvas.height * imgW) / canvas.width;
                pdf.addImage(canvas.toDataURL('image/png'), 'PNG', 0, 10, imgW, imgH);
                pdf.save(`challan_${currentRef.replace(/\//g, '_')}.pdf`);
            });
        }

        function resetAll() {
            document.getElementById('challanForm').reset();
            document.getElementById('otherOffence').style.display = 'none';
            uploadedImages = [null, null, null];
            document.getElementById('filePreviews').innerHTML = '';
            document.getElementById('fileChooseLabel').textContent = 'No file chosen';
            currentRef = generateRef();
            document.getElementById('formRefNo').textContent = currentRef;
            document.getElementById('date').value = new Date().toISOString().split('T')[0];
            showForm();
        }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</body>

</html>